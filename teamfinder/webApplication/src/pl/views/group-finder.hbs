<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/group-finder.css">
    <title>Groupfinder</title>
</head>

<body>
    <div class="container ">
        <h1 class="title mb-5">Find your new team members</h1>

        {{#if error.length}}
            {{#each error}}
            <p class="errorColor">{{this}}</p>
            {{/each}}
        {{/if}}

        <table class="table table-dark table-striped table-hover">
            <tbody>
                {{#if groups.length}}
                    {{#each groups}}
                        <tr class="tableGroup">
                            <td><img src="/{{this.image}}.png" class="rounded img-size img-fluid" alt={{this.image}}></td>
                            <td>{{this.name}}</td>
                            <td>{{this.sport}}</td>
                            {{#if this.minAge}}
                                <td>Age requirement: {{this.minAge}} - {{this.maxAge}}</td>
                            {{else}}
                                <td>Age requirement: None</td>
                            {{/if}}
                            <td>City: {{this.city}}</td>
                            <td>Gender: {{this.allowedGender}}</td>

                            <td>{{this.nrOfMembers}}/{{this.memberSlots}} Members</td>
                            <td>
                                <form method="POST">
                                    <input type="hidden" name="groupId" value="{{this.groupId}}">
                                    <input type="hidden" name="_csrf" value="{{../csrfToken}}">
                                    {{#if ../accountId}}
                                        <button class="btn btn-link btn-primary">Join Group</button>
                                    {{else}}
                                        <button class="btn btn-link btn-primary" disabled>Login to join a group</button>
                                    {{/if}}
                                </form>
                            </td>
                        </tr>
                    {{/each}}
                {{else}}
                    <p>You seem to be a part of every single existing group! good job...?</p>
                {{/if}}
            </tbody>
        </table>
    </div>
</body>

</html>